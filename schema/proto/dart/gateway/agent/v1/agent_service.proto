syntax = "proto3";

package dart.gateway.agent.v1;

import "google/api/annotations.proto";
import "google/api/resource.proto";
import "google/api/field_behavior.proto";
import "google/protobuf/empty.proto";
import "google/protobuf/field_mask.proto";
import "dart/gateway/agent/v1/agent.proto";

option go_package = "github.com/10Narratives/dart/pkg/dart/gateway/agent/v1;agent";

service AgentService {
  // Lists agents in a project.
  rpc ListAgents(ListAgentsRequest) returns (ListAgentsResponse) {
    option (google.api.http) = {
      get : "/v1alpha1/{parent=projects/*}/agents"
    };
  }

  // Gets details of a specific agent.
  rpc GetAgent(GetAgentRequest) returns (Agent) {
    option (google.api.http) = {
      get : "/v1alpha1/{name=projects/*/agents/*}"
    };
  }

  // Creates a new agent.
  rpc CreateAgent(CreateAgentRequest) returns (Agent) {
    option (google.api.http) = {
      post : "/v1alpha1/{parent=projects/*}/agents"
      body : "agent"
    };
  }

  // Deletes an agent.
  rpc DeleteAgent(DeleteAgentRequest) returns (google.protobuf.Empty) {
    option (google.api.http) = {
      delete : "/v1alpha1/{name=projects/*/agents/*}"
    };
  }
}

message ListAgentsRequest {
  // Required. The project to list agents from.
  // Format: `projects/{project}`
  string parent = 1 [
    (google.api.field_behavior) = REQUIRED,
    (google.api.resource_reference).type = "dart.gateway/Project"
  ];

  // The maximum number of agents to return.
  int32 page_size = 2 [ (google.api.field_behavior) = OPTIONAL ];

  // A page token, received from a previous `ListAgents` call.
  string page_token = 3 [ (google.api.field_behavior) = OPTIONAL ];
}

message ListAgentsResponse {
  // The list of agents.
  repeated Agent agents = 1;

  // A token to retrieve the next page of results.
  string next_page_token = 2;
}

message GetAgentRequest {
  // Required. The resource name of the agent to retrieve.
  // Format: `projects/{project}/agents/{agent}`
  string name = 1 [
    (google.api.field_behavior) = REQUIRED,
    (google.api.resource_reference).type = "dart.gateway/Agent"
  ];
}

message CreateAgentRequest {
  // Required. The project in which to create the agent.
  // Format: `projects/{project}`
  string parent = 1 [
    (google.api.field_behavior) = REQUIRED,
    (google.api.resource_reference).type = "dart.gateway/Project"
  ];

  // Optional. The agent ID to use for this agent.
  string agent_id = 2 [ (google.api.field_behavior) = OPTIONAL ];

  // Required. The agent to create.
  Agent agent = 3 [ (google.api.field_behavior) = REQUIRED ];
}

message DeleteAgentRequest {
  // Required. The resource name of the agent to delete.
  // Format: `projects/{project}/agents/{agent}`
  string name = 1 [
    (google.api.field_behavior) = REQUIRED,
    (google.api.resource_reference).type = "dart.gateway/Agent"
  ];
}